!function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/dist",o(o.s=3)}([function(t,e,o){var i=o(1),n=o(2);"string"==typeof(n=n.__esModule?n.default:n)&&(n=[[t.i,n,""]]);var r={insert:"head",singleton:!1};i(n,r);t.exports=n.locals||{}},function(t,e,o){"use strict";var i,n=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},r=function(){var t={};return function(e){if(void 0===t[e]){var o=document.querySelector(e);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}t[e]=o}return t[e]}}(),s=[];function a(t){for(var e=-1,o=0;o<s.length;o++)if(s[o].identifier===t){e=o;break}return e}function l(t,e){for(var o={},i=[],n=0;n<t.length;n++){var r=t[n],l=e.base?r[0]+e.base:r[0],c=o[l]||0,h="".concat(l," ").concat(c);o[l]=c+1;var d=a(h),u={css:r[1],media:r[2],sourceMap:r[3]};-1!==d?(s[d].references++,s[d].updater(u)):s.push({identifier:h,updater:y(u,e),references:1}),i.push(h)}return i}function c(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var n=o.nc;n&&(i.nonce=n)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var s=r(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var h,d=(h=[],function(t,e){return h[t]=e,h.filter(Boolean).join("\n")});function u(t,e,o,i){var n=o?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=d(e,n);else{var r=document.createTextNode(n),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}function p(t,e,o){var i=o.css,n=o.media,r=o.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),r&&btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var m=null,f=0;function y(t,e){var o,i,n;if(e.singleton){var r=f++;o=m||(m=c(e)),i=u.bind(null,o,r,!1),n=u.bind(null,o,r,!0)}else o=c(e),i=p.bind(null,o,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(o)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=n());var o=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<o.length;i++){var n=a(o[i]);s[n].references--}for(var r=l(t,e),c=0;c<o.length;c++){var h=a(o[c]);0===s[h].references&&(s[h].updater(),s.splice(h,1))}o=r}}}},function(t,e,o){},function(t,e,o){"use strict";o.r(e);o(0);var i,n={ls:window.localStorage?window.localStorage:null,setItem(t,e){if(this.ls){let o=[],i=!1;return this.getItem(t)?(o=JSON.parse(this.getItem(t)),o=o.map(t=>(t.name==e.name&&(t=e,i=!0),t)),i?(this.ls.setItem(t,JSON.stringify(o)),!1):(o.push(e),this.ls.setItem(t,JSON.stringify(o)),!0)):(o.push(e),this.ls.setItem(t,JSON.stringify(o)),!0)}},getItem(t){if(this.ls)return this.ls.getItem(t)},clearAll(){if(this.ls)return this.ls.clear()}};class r{constructor(t,e){this.wrapEl="string"==typeof t?document.querySelector(t):t,this.tooltipInst=e,this.calendarEl=this.wrapEl.querySelector(".calendar"),this.today=new Date,this.currMonth=this.today.getMonth(),this.currYear=this.today.getFullYear(),this.switchInfoEl=document.querySelector(".switch__info"),this.weekDays=["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота","Воскресенье"],this.weekDaysShort=["Пн","Вт","Ср","Чт","Пт","Сб","Вс"]}static getDateInfo(t){const e=new Date(t.year,t.month,0);switch(t.type){case"firstDay":return new Date(t.year,t.month).getDay();case"daysAmount":return new Date(t.year,t.month,0).getDate();case"localMonth":return e.toLocaleString("default",{month:"long"});default:console.log("There is no case for this type - "+t.type)}}generateFrame(t=null){const e=r.getDateInfo({type:"localMonth",year:this.currYear,month:+this.currMonth+1});this.switchInfoEl.innerHTML="",this.switchInfoEl.append(`${e} ${this.currYear}`),this.calendarEl.innerHTML="";let o=new DocumentFragment;const i=+r.getDateInfo({type:"firstDay",year:this.currYear,month:this.currMonth}),n=r.getDateInfo({type:"daysAmount",year:this.currYear,month:this.currMonth});for(let t=0;t<7;t++){let e=document.createElement("div");e.classList.add("calendar-day","calendar-day--mobile"),e.append(this.weekDaysShort[t%7]),o.append(e)}for(let t=0;t<35;t++){let e=document.createElement("div");e.classList.add("calendar-day");let r=document.createElement("div");r.classList.add("calendar-title");let s=document.createElement("span");s.classList.add("calendar-title__name"),s.append(this.weekDays[t%7]);let a=document.createElement("span");if(a.classList.add("calendar-title__number"),t+1>=i&&t<+n+i){let o=t+2-i;s.append(", "),a.append(o.toString()),e.dataset.date=`${this.currYear}/${this.currMonth}/${o}`,this.generateEvents(e),this.addShowListeners(e)}r.append(s),r.append(a),e.append(r),o.append(e)}this.calendarEl.append(o)}generateEvents(t){const e=t.dataset.date;let o,i=n.getItem(e.toString());i=i?JSON.parse(i):null,i&&(o=new DocumentFragment,i.map(t=>{let e=document.createElement("span");e.classList.add("calendar-day__event"),e.append(t.name),e.dataset.name=t.name,o.append(e)}),t.append(o))}addShowListeners(t){const e=t.dataset.date;t.addEventListener("click",o=>{let i=o.target.getBoundingClientRect();if(o.target.closest(".calendar-day__event")){let i=JSON.parse(n.getItem(t.dataset.date)).find(t=>t.name==o.target.dataset.name);this.tooltipInst.showEv(i,e)}else o.target.closest(".calendar-day")&&this.tooltipInst.showEv(null,e);this.tooltipInst.setPosition(i)})}nextMonth(){this.currYear=11===this.currMonth?this.currYear+1:this.currYear,this.currMonth=(this.currMonth+1)%12,this.generateFrame({year:this.currYear,month:this.currMonth})}prevMonth(){this.currYear=0===this.currMonth?this.currYear-1:this.currYear,this.currMonth=0===this.currMonth?11:this.currMonth-1,this.generateFrame({year:this.currYear,month:this.currMonth})}init(){this.generateFrame();this.wrapEl.querySelector(".switch").addEventListener("click",t=>{if(this.tooltipInst.hideTt(),t.preventDefault(),t.target.closest("button"))switch(t.target.closest("button").className){case"switch__today-btn":this.currMonth=this.today.getMonth(),this.currYear=this.today.getFullYear(),this.generateFrame();break;case"switch__prev-btn":this.prevMonth();break;case"switch__next-btn":this.nextMonth()}})}}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(t){t.hasOwnProperty("append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach((function(t){var o=t instanceof Node;e.appendChild(o?t:document.createTextNode(String(t)))})),this.appendChild(e)}})})),(i=Element.prototype).matches=i.matches||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector||i.webkitMatchesSelector,i.closest=i.closest||function(t){return this?this.matches(t)?this:this.parentElement?this.parentElement.closest(t):null:null};const s=new class{constructor(t){this.tooltipEl="string"==typeof t?document.querySelector(t):t,this.tooltipElDate=this.tooltipEl.querySelector(".tooltip-fields__date"),this.tooltipElName=this.tooltipEl.querySelector(".tooltip-fields__name"),this.tooltipElMembers=this.tooltipEl.querySelector(".tooltip-fields__members"),this.tooltipElDesc=this.tooltipEl.querySelector(".tooltip-fields__desc"),this.tooltipElClose=this.tooltipEl.querySelector(".tooltip__close"),this.tooltipElSave=this.tooltipEl.querySelector(".tooltip-actions__save"),this.tooltipElCancel=this.tooltipEl.querySelector(".tooltip-actions__cancel")}setPosition(t){const e=document.documentElement.clientWidth/2;if(this.tooltipEl.style.top=t.bottom+"px",e>t.right&&e>500)this.tooltipEl.style.left=t.left+"px",this.tooltipEl.classList.remove("tooltip__right-bottom"),this.tooltipEl.classList.remove("tooltip__full");else if(e>500){let e=t.right-this.tooltipEl.clientWidth;this.tooltipEl.style.left=e+"px",this.tooltipEl.classList.remove("tooltip__full"),this.tooltipEl.classList.add("tooltip__right-bottom")}else this.tooltipEl.style.top="0px",this.tooltipEl.style.left="0px",this.tooltipEl.classList.remove("tooltip__right-bottom"),this.tooltipEl.classList.add("tooltip__full")}showEv(t,e){t?(this.showTt(),this.tooltipEl.dataset.date=e,this.tooltipElDate.value=e,this.tooltipElName.value=t.name,this.tooltipElMembers.value=t.members,this.tooltipElDesc.value=t.desc):(this.showTt(),this.tooltipEl.dataset.date=e,this.tooltipElDate.value=e,this.tooltipElName.value="",this.tooltipElMembers.value="",this.tooltipElDesc.value="")}saveTt(t){t(),this.hideTt()}hideTt(){this.tooltipEl.classList.add("hidden"),this.tooltipElDate.setAttribute("type","hidden")}showTt(){this.tooltipEl.classList.remove("hidden")}init(){this.hideTt(),this.tooltipElClose.addEventListener("click",t=>{this.hideTt()}),this.tooltipElCancel.addEventListener("click",t=>{this.hideTt()}),this.tooltipElSave.addEventListener("click",t=>{const e=this.tooltipEl.querySelector(".tooltip-fields__date");let o=this.tooltipEl.dataset.date||e.value,i={name:this.tooltipElName.value,members:this.tooltipElMembers.value,desc:this.tooltipElDesc.value},r=n.setItem(o,i),s=document.querySelector(`.calendar-day[data-date='${o}']`);if(r){let t=document.createElement("span");t.classList.add("calendar-day__event"),t.append(i.name),t.dataset.name=i.name,s.append(t)}this.tooltipElDate.setAttribute("type","hidden"),this.hideTt()})}}(".tooltip");s.init();new r(".main-calendar",s).init();const a=document.querySelector(".tooltip");document.querySelector(".action-buttons").querySelector(".action-buttons__add").addEventListener("click",t=>{a.querySelector(".tooltip-fields__date").setAttribute("type","text"),s.showEv(null,"");let e=t.target.getBoundingClientRect();s.setPosition(e)})}]);